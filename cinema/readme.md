После запуска приложения пользователю предоставляется выбор - использовать приложение в качестве посетителя кинотеатра или работника.
Если пользователь выбирает работника, то программа спрашивает, есть ли у него аккаунт. После отрицательного ответа пользователю предоставляется регистрация.
Когда пользователь зарегистрировался / если у него был аккаунт, он может войти в свой аккаунт. Данные об аккаунтах хранятся в файле cinema/backup/accounts.csv. Все пароли хранятся в зашифрованном виде. Шифрование производилось банально - при помощи операции xor строки со строкой.
После успешного входа в аккаунт работник может добавить новый фильм (нельзя использовать уже существующие имена фильмов), изменить данные какого-то фильма (его имя, время начала или продолжительность) или очистить данные всех фильмов (установить количество билетов в начальное значение, сделано для удобства тестирования, чтобы данные руками не править). Данные о фильмах хранятся в файле cinema/backup/films.txt. Я в самом начале выполнения задания забыл о существовании файлов .json. А потом решил не переделывать, так как для нашего проекта не критично как хранить данные. А так удобно записывать данные в файл (просто переопределенная строка вывода класса) и читать данные из файла (обычный и понятный парсинг строки). Данные о зале для каждого фильма хранятся в файле cinema/backup/hall.csv. Это удобно и для записи, и для чтения.
Если пользователь является обычным посетителем, ему будет предложен список фильмов. Он выбирает понравившийся фильм (вводит название), затем может купить или вернуть билет (естественно стоят проверки на кол-во билетов на покупку и возврат). Места, которые пользователь купил, отображаются как купленные, а пользователь переходит в основное меню. Билеты на фильмы, которые начались до 12 дня, невозможно вернуть.
Некоторые улучшения, которые я вижу для своей программы, но которые я не реализовал:
1) самое очевидное - хрение данных в файлах не .txt, а в .json. В самом начале работы я забыл про существование расширения json, а потом решил не переделывать. Да и для такого проекта довольно просто и удобно хранить данные в обысном текстовом формате
2) создать каждому пользователю аккаунт, там хранить список фильмов, купленные билеты (кол-во и места) и прочее. Тут же можно к фильмам добавить параметр - день, когда он идет. Проверять во время покупки, что на это время у человека нет билетов на другой фильм и т.д.
3) добавить счетчик времени в секундах при запуске программы. Скажем, что 1 секунда работы программы = 1 минуте фильма. Сохранять состояние счетчика в отдельный файл. Так можно улучшить функцию возврата билетов, чтобы данные сверялись не с константой
